<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Văn bản Đến/Đi - Offline</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Offline Font Awesome CSS -->
    <style>
        /* Font Awesome Icons - Offline version */
        @font-face {
            font-family: 'FontAwesome';
            src: url('data:application/font-woff;base64,') format('woff');
        }
        
        .fas, .fa {
            font-family: 'FontAwesome';
            font-weight: 900;
        }
        
        /* Icon replacements using CSS */
        .fa-file-alt:before { content: '📄'; }
        .fa-plus:before { content: '➕'; }
        .fa-bell:before { content: '🔔'; }
        .fa-tachometer-alt:before { content: '📊'; }
        .fa-arrow-down:before { content: '⬇️'; }
        .fa-arrow-up:before { content: '⬆️'; }
        .fa-search:before { content: '🔍'; }
        .fa-chart-bar:before { content: '📈'; }
        .fa-eye:before { content: '👁️'; }
        .fa-edit:before { content: '✏️'; }
        .fa-trash:before { content: '🗑️'; }
        .fa-building:before { content: '🏢'; }
        .fa-calendar-alt:before { content: '📅'; }
        .fa-file:before { content: '📁'; }
        .fa-clock:before { content: '⏰'; }
        .fa-exclamation-triangle:before { content: '⚠️'; }
        .fa-check-circle:before { content: '✅'; }
        .fa-exclamation-circle:before { content: '❗'; }
        .fa-info-circle:before { content: 'ℹ️'; }
        .fa-download:before { content: '⬇️'; }
        .fa-file-signature:before { content: '📝'; }
        .fa-gavel:before { content: '⚖️'; }
        .fa-bullhorn:before { content: '📢'; }
        .fa-chart-line:before { content: '📊'; }
        .fa-hand-paper:before { content: '✋'; }
        
        /* Override font-family for icons */
        .fas, .fa {
            font-family: inherit !important;
            font-weight: normal !important;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1><i class="fas fa-file-alt"></i> Quản lý Văn bản</h1>
                <div class="header-actions">
                    <button class="btn btn-primary" id="newDocBtn">
                        <i class="fas fa-plus"></i> Thêm văn bản mới
                    </button>
                    <button class="btn btn-secondary" id="notificationBtn">
                        <i class="fas fa-bell"></i> Nhắc việc
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <ul class="nav-menu">
                <li><a href="#" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Tổng quan
                </a></li>
                <li><a href="#" class="nav-link" data-section="incoming">
                    <i class="fas fa-arrow-down"></i> Văn bản đến
                </a></li>
                <li><a href="#" class="nav-link" data-section="outgoing">
                    <i class="fas fa-arrow-up"></i> Văn bản đi
                </a></li>
                <li><a href="#" class="nav-link" data-section="search">
                    <i class="fas fa-search"></i> Tìm kiếm
                </a></li>
                <li><a href="#" class="nav-link" data-section="reports">
                    <i class="fas fa-chart-bar"></i> Báo cáo
                </a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h2>Tổng quan hệ thống</h2>
                
                <!-- Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon incoming">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="incomingCount">0</h3>
                            <p>Văn bản đến</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon outgoing">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="outgoingCount">0</h3>
                            <p>Văn bản đi</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon pending">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="pendingCount">0</h3>
                            <p>Chờ xử lý</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon overdue">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="overdueCount">0</h3>
                            <p>Quá hạn</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Documents -->
                <div class="recent-documents">
                    <h3>Văn bản gần đây</h3>
                    <div class="document-list" id="recentDocuments">
                        <!-- Documents will be loaded here -->
                    </div>
                </div>

                <!-- Pending Tasks -->
                <div class="pending-tasks">
                    <h3>Công việc sắp đến hạn</h3>
                    <div class="task-list" id="pendingTasks">
                        <!-- Tasks will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Incoming Documents Section -->
            <section id="incoming" class="section">
                <div class="section-header">
                    <h2>Văn bản đến</h2>
                    <button class="btn btn-primary" onclick="openDocumentModal('incoming')">
                        <i class="fas fa-plus"></i> Thêm văn bản đến
                    </button>
                </div>
                
                <div class="filters">
                    <input type="text" placeholder="Tìm kiếm..." class="search-input" id="incomingSearch">
                    <select class="filter-select" id="incomingStatusFilter">
                        <option value="">Tất cả trạng thái</option>
                        <option value="pending">Chờ xử lý</option>
                        <option value="processing">Đang xử lý</option>
                        <option value="completed">Hoàn thành</option>
                        <option value="overdue">Quá hạn</option>
                    </select>
                    <select class="filter-select" id="incomingTypeFilter">
                        <option value="">Tất cả loại văn bản</option>
                        <option value="official">Công văn</option>
                        <option value="directive">Chỉ thị</option>
                        <option value="decision">Quyết định</option>
                        <option value="notification">Thông báo</option>
                        <option value="report">Báo cáo</option>
                        <option value="plan">Kế hoạch</option>
                        <option value="proposal">Đề xuất/Đề nghị</option>
                        <option value="guideline">Hướng dẫn</option>
                        <option value="circular">Thông tư</option>
                        <option value="certificate">Giấy chứng nhận</option>
                        <option value="contract">Hợp đồng</option>
                        <option value="agreement">Thỏa thuận</option>
                        <option value="minutes">Biên bản</option>
                        <option value="instruction">Chỉ đạo</option>
                        <option value="summary">Tờ trình</option>
                        <option value="memo">Bản ghi nhớ</option>
                        <option value="invitation">Thư mời</option>
                        <option value="other">Khác</option>
                    </select>
                </div>

                <div class="document-table-container">
                    <table class="document-table">
                        <thead>
                            <tr>
                                <th>Số hiệu</th>
                                <th>Ngày đến</th>
                                <th>Trích yếu</th>
                                <th>Cơ quan gửi</th>
                                <th>Loại văn bản</th>
                                <th>Trạng thái</th>
                                <th>Hạn xử lý</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="incomingDocuments">
                            <!-- Documents will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Outgoing Documents Section -->
            <section id="outgoing" class="section">
                <div class="section-header">
                    <h2>Văn bản đi</h2>
                    <button class="btn btn-primary" onclick="openDocumentModal('outgoing')">
                        <i class="fas fa-plus"></i> Thêm văn bản đi
                    </button>
                </div>
                
                <div class="filters">
                    <input type="text" placeholder="Tìm kiếm..." class="search-input" id="outgoingSearch">
                    <select class="filter-select" id="outgoingStatusFilter">
                        <option value="">Tất cả trạng thái</option>
                        <option value="draft">Dự thảo</option>
                        <option value="pending">Chờ ký</option>
                        <option value="signed">Đã ký</option>
                        <option value="sent">Đã gửi</option>
                    </select>
                    <select class="filter-select" id="outgoingTypeFilter">
                        <option value="">Tất cả loại văn bản</option>
                        <option value="official">Công văn</option>
                        <option value="directive">Chỉ thị</option>
                        <option value="decision">Quyết định</option>
                        <option value="notification">Thông báo</option>
                        <option value="report">Báo cáo</option>
                        <option value="plan">Kế hoạch</option>
                        <option value="proposal">Đề xuất/Đề nghị</option>
                        <option value="guideline">Hướng dẫn</option>
                        <option value="circular">Thông tư</option>
                        <option value="certificate">Giấy chứng nhận</option>
                        <option value="contract">Hợp đồng</option>
                        <option value="agreement">Thỏa thuận</option>
                        <option value="minutes">Biên bản</option>
                        <option value="instruction">Chỉ đạo</option>
                        <option value="summary">Tờ trình</option>
                        <option value="memo">Bản ghi nhớ</option>
                        <option value="invitation">Thư mời</option>
                        <option value="other">Khác</option>
                    </select>
                </div>

                <div class="document-table-container">
                    <table class="document-table">
                        <thead>
                            <tr>
                                <th>Số hiệu</th>
                                <th>Ngày tạo</th>
                                <th>Trích yếu</th>
                                <th>Nơi nhận</th>
                                <th>Loại văn bản</th>
                                <th>Trạng thái</th>
                                <th>Người ký</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="outgoingDocuments">
                            <!-- Documents will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Search Section -->
            <section id="search" class="section">
                <h2>Tìm kiếm nâng cao</h2>
                
                <div class="advanced-search">
                    <div class="search-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="searchText">Từ khóa</label>
                                <input type="text" id="searchText" placeholder="Nhập từ khóa tìm kiếm...">
                            </div>
                            <div class="form-group">
                                <label for="searchType">Loại văn bản</label>
                                <select id="searchType">
                                    <option value="">Tất cả</option>
                                    <option value="incoming">Văn bản đến</option>
                                    <option value="outgoing">Văn bản đi</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="searchDateFrom">Từ ngày</label>
                                <input type="date" id="searchDateFrom">
                            </div>
                            <div class="form-group">
                                <label for="searchDateTo">Đến ngày</label>
                                <input type="date" id="searchDateTo">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="searchDepartment">Cơ quan</label>
                                <input type="text" id="searchDepartment" placeholder="Tên cơ quan...">
                            </div>
                            <div class="form-group">
                                <label for="searchStatus">Trạng thái</label>
                                <select id="searchStatus">
                                    <option value="">Tất cả</option>
                                    <option value="pending">Chờ xử lý</option>
                                    <option value="processing">Đang xử lý</option>
                                    <option value="completed">Hoàn thành</option>
                                    <option value="overdue">Quá hạn</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" id="searchBtn">
                            <i class="fas fa-search"></i> Tìm kiếm
                        </button>
                    </div>
                </div>

                <div class="search-results" id="searchResults">
                    <!-- Search results will be displayed here -->
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="section">
                <h2>Báo cáo thống kê</h2>
                
                <div class="report-controls">
                    <select id="reportType">
                        <option value="monthly">Báo cáo tháng</option>
                        <option value="quarterly">Báo cáo quý</option>
                        <option value="yearly">Báo cáo năm</option>
                    </select>
                    <input type="month" id="reportPeriod">
                    <button class="btn btn-primary" id="generateReportBtn">
                        <i class="fas fa-chart-bar"></i> Tạo báo cáo
                    </button>
                    <button class="btn btn-secondary" id="exportReportBtn">
                        <i class="fas fa-download"></i> Xuất Excel
                    </button>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <h3>Thống kê theo loại văn bản</h3>
                        <div id="typeChart" style="height: 300px; display: flex; align-items: center; justify-content: center; color: #666;">
                            📊 Biểu đồ thống kê sẽ hiển thị ở đây
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Xu hướng theo thời gian</h3>
                        <div id="trendChart" style="height: 300px; display: flex; align-items: center; justify-content: center; color: #666;">
                            📈 Biểu đồ xu hướng sẽ hiển thị ở đây
                        </div>
                    </div>
                </div>

                <div class="report-table" id="reportTable">
                    <!-- Report data will be displayed here -->
                </div>
            </section>
        </div>
    </main>

    <!-- Document Modal -->
    <div id="documentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Thêm văn bản</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            
            <form id="documentForm" class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label for="documentNumber">Số hiệu văn bản *</label>
                        <input type="text" id="documentNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="documentDate">Ngày ban hành *</label>
                        <input type="date" id="documentDate" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="documentSummary">Trích yếu *</label>
                    <textarea id="documentSummary" rows="3" required placeholder="Nhập trích yếu nội dung văn bản..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="documentType">Loại văn bản *</label>
                        <select id="documentType" required>
                            <option value="">Chọn loại văn bản</option>
                            <option value="official">Công văn</option>
                            <option value="directive">Chỉ thị</option>
                            <option value="decision">Quyết định</option>
                            <option value="notification">Thông báo</option>
                            <option value="report">Báo cáo</option>
                            <option value="plan">Kế hoạch</option>
                            <option value="proposal">Đề xuất/Đề nghị</option>
                            <option value="guideline">Hướng dẫn</option>
                            <option value="circular">Thông tư</option>
                            <option value="certificate">Giấy chứng nhận</option>
                            <option value="contract">Hợp đồng</option>
                            <option value="agreement">Thỏa thuận</option>
                            <option value="minutes">Biên bản</option>
                            <option value="instruction">Chỉ đạo</option>
                            <option value="summary">Tờ trình</option>
                            <option value="memo">Bản ghi nhớ</option>
                            <option value="invitation">Thư mời</option>
                            <option value="other">Khác</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="documentPriority">Độ ưu tiên</label>
                        <select id="documentPriority">
                            <option value="normal">Bình thường</option>
                            <option value="urgent">Khẩn</option>
                            <option value="very-urgent">Hỏa tốc</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row" id="incomingFields">
                    <div class="form-group">
                        <label for="senderDepartment">Cơ quan gửi *</label>
                        <input type="text" id="senderDepartment" placeholder="Tên cơ quan gửi văn bản">
                    </div>
                    <div class="form-group">
                        <label for="processingDeadline">Hạn xử lý</label>
                        <input type="date" id="processingDeadline">
                    </div>
                </div>
                
                <div class="form-row" id="outgoingFields">
                    <div class="form-group">
                        <label for="receiverDepartment">Nơi nhận *</label>
                        <input type="text" id="receiverDepartment" placeholder="Tên cơ quan nhận văn bản">
                    </div>
                    <div class="form-group">
                        <label for="signer">Người ký</label>
                        <input type="text" id="signer" placeholder="Tên người ký">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="documentTags">Thẻ phân loại</label>
                    <input type="text" id="documentTags" placeholder="Nhập các thẻ, cách nhau bằng dấu phẩy">
                </div>
                
                <div class="form-group">
                    <label for="documentFile">Tệp đính kèm</label>
                    <input type="file" id="documentFile" accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png">
                </div>
                
                <div class="form-group">
                    <label for="documentNotes">Ghi chú</label>
                    <textarea id="documentNotes" rows="2" placeholder="Ghi chú thêm..."></textarea>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelBtn">Hủy</button>
                <button type="submit" form="documentForm" class="btn btn-primary">Lưu</button>
            </div>
        </div>
    </div>

    <!-- Document Preview Modal -->
    <div id="previewModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="previewTitle">Chi tiết văn bản</h3>
                <button class="close-btn" id="closePreview">&times;</button>
            </div>
            <div class="modal-body" id="previewContent">
                <!-- Document details will be displayed here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="editDocBtn">Chỉnh sửa</button>
                <button type="button" class="btn btn-danger" id="deleteDocBtn">Xóa</button>
                <button type="button" class="btn btn-primary" id="closePreviewBtn">Đóng</button>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thông báo nhắc việc</h3>
                <button class="close-btn" id="closeNotificationModal">&times;</button>
            </div>
            <div class="modal-body" id="notificationContent">
                <!-- Notifications will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Đang xử lý...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Offline Chart.js alternative -->
    <script>
        // Simple Chart.js alternative for offline use
        window.Chart = function(ctx, config) {
            return {
                data: config.data,
                update: function() {
                    // Simple update function
                }
            };
        };
    </script>
    
    <script src="script.js"></script>
</body>
</html>
